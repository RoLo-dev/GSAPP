@model User

@section Dashboard{
    <link rel="stylesheet" href="~/css/Dashboard.css">
    <link rel="stylesheet" href="~/css/Queries.css">
}


<header id="Dash-header">
    <div class="wrapper nav">
        <div class="logo" data-aos="fade-down">
            <h1>Profile</h1>
        </div>
        <div class="nav-links">
            <ul>
                <li>
                    <a asp-action="Logout" asp-controller="Home">Logout</a>
                </li>
                <li>
                    <a asp-action="Dashboard" asp-controller="Home" id="request-btn" class="standout-btn">Dashboard</a>
                </li>
            </ul>
        </div>
    </div>
</header>

<section id="detail-main" class="wrapper">
    <div id="detail-content" data-aos="fade-left">
        <div class="person-info-container">

            <div class="person-image">
                <img src="~/images/@Model.ImageUrl" class="pic">
            </div>
            <div class="person-info-text">
                <p><span class="bold">Name: </span>@Model.FirstName @Model.LastName</p>
                <p><span class="bold">Email: </span>@Model.Email</p>
                <p><span class="bold">Phone: </span>@Model.PhoneNumber</p>
                <p><span class="bold">Venmo ID: </span>@Model.VenmoId</p>
                <p><span class="bold">Address: </span>@Model.Address1, @Model.City, @Model.State, @Model.ZipCode</p>

                <div class="request-container">
                <h4>Accepted Requests</h4>
                @if (@ViewBag.Completed != null)
                {
                    @foreach (var req in @ViewBag.Completed)
                    {
                        <div >
                            <p><span class="bold">Name:</span><a asp-action="Detail" asp-route-Uid = "@req.Creator.UserId">@req.Creator.FirstName @req.Creator.LastName</a> </p>
                            <p><span class="bold">Address:</span>@req.Creator.Address1, @req.Creator.City, @req.Creator.ZipCode</p>
                            <p><span class="bold">Needed by: </span> @req.Urgency</p>
                            <p><span class="bold">Items needed: </span> @req.Items</p>
                            <p><span class="bold">Notes: </span>@req.Notes</p>
                            @if(@Model.UserId == @ViewBag.CurrentUser.UserId)
                            {
                                <form asp-action="CancelReq" asp-route-reqId="@req.RequestId" asp-controller="Home" method="POST">
                                    <input type="submit" class="form-btn" value="Cancel Request">
                                </form>
                            }
                        </div>
                    }
                }else{
                    <p>You Have No Requests Completed, Visit Our <a asp-action="Dashboard">Dashboard</a> To start Helping Our Community</p>
                }
                </div>
            </div>

        </div>
    </div>
</section>

<script>
    let mobileOnly = window.matchMedia('(max-width: 1000px)');
    const formContainer = document.getElementById('help-form');
    const explainCard = document.querySelector('.explanation-card');

    function animationStop(){
        if(mobileOnly.matches){
            console.log('working');
            explainCard.setAttribute('data-aos', '0')
            formContainer.setAttribute('data-aos', '0');
        }
    }
    animationStop();
</script>




